<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Summarizer - R√©sum√© Intelligent</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- HEADER -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1 class="title">
                    üé¨ <span class="gradient-text">YouTube Summarizer</span>
                </h1>
                <p class="subtitle">Obtenez un r√©sum√© intelligent de n'importe quelle vid√©o YouTube</p>
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="main">
        <div class="container">
            <!-- INPUT SECTION -->
            <section class="input-section">
                <div class="input-container">
                    <div class="input-group">
                        <label for="youtubeUrl" class="input-label">
                            üîó URL de la vid√©o YouTube
                        </label>
                        <div class="input-wrapper">
                            <input 
                                type="url" 
                                id="youtubeUrl" 
                                class="url-input" 
                                placeholder="https://www.youtube.com/watch?v=..." 
                                autocomplete="off"
                                spellcheck="false"
                            >
                            <button id="analyzeBtn" class="btn btn-primary" type="button">
                                üé¨ Analyser la vid√©o
                            </button>
                        </div>
                    </div>
                    
                    <!-- QUICK EXAMPLES -->
                    <div class="examples">
                        <p class="examples-title">üí° Exemples :</p>
                        <div class="example-links">
                            <button class="example-btn" onclick="setExampleUrl('https://www.youtube.com/watch?v=dQw4w9WgXcQ')">
                                üéµ Musique
                            </button>
                            <button class="example-btn" onclick="setExampleUrl('https://www.youtube.com/watch?v=9bZkp7q19f0')">
                                üéì √âducatif
                            </button>
                            <button class="example-btn" onclick="setExampleUrl('https://www.youtube.com/watch?v=jNQXAC9IVRw')">
                                üî¨ Tech
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- LOADING SECTION -->
            <section id="loadingContainer" class="loading-section" style="display: none;">
                <div class="loading-card">
                    <div class="loading-content">
                        <div class="spinner">
                            <div class="spinner-ring"></div>
                            <div class="spinner-ring"></div>
                            <div class="spinner-ring"></div>
                        </div>
                        
                        <h3 class="loading-title">ü§ñ Analyse en cours...</h3>
                        <p id="loadingMessage" class="loading-message">Initialisation...</p>
                        
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div id="progressBar" class="progress-fill"></div>
                            </div>
                            <span id="progressText" class="progress-text">0%</span>
                        </div>
                        
                        <div class="loading-steps">
                            <div class="step" id="step1">üîç Extraction des m√©tadonn√©es</div>
                            <div class="step" id="step2">üìù R√©cup√©ration des sous-titres</div>
                            <div class="step" id="step3">üß† Analyse du contenu</div>
                            <div class="step" id="step4">‚ú® G√©n√©ration du r√©sum√©</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ERROR SECTION -->
            <section id="errorContainer" class="error-section" style="display: none;">
                <div class="error-card">
                    <div class="error-icon">‚ùå</div>
                    <h3 class="error-title">Erreur lors de l'analyse</h3>
                    <p id="errorMessage" class="error-message"></p>
                    <div class="error-actions">
                        <button onclick="newAnalysis()" class="btn btn-secondary">
                            üîÑ R√©essayer
                        </button>
                        <button onclick="showHelp()" class="btn btn-outline">
                            ‚ùì Aide
                        </button>
                    </div>
                </div>
            </section>

            <!-- RESULTS SECTION -->
            <section id="resultsContainer" class="results-section" style="display: none;">
                <!-- VIDEO INFO -->
                <div class="video-info-card">
                    <div class="video-thumbnail">
                        <img id="videoThumbnail" src="" alt="Miniature vid√©o">
                        <div class="video-duration" id="videoDuration"></div>
                    </div>
                    <div class="video-details">
                        <h2 id="videoTitle" class="video-title"></h2>
                        <div class="video-meta">
                            <span id="videoChannel" class="channel-name"></span>
                            <span id="videoViews" class="video-views"></span>
                            <span id="videoDate" class="video-date"></span>
                        </div>
                        <p id="videoDescription" class="video-description"></p>
                    </div>
                </div>

                <!-- SUMMARY TABS -->
                <div class="summary-container">
                    <div class="tabs">
                        <button class="tab active" onclick="switchTab('quick')">
                            ‚ö° R√©sum√© Express
                        </button>
                        <button class="tab" onclick="switchTab('detailed')">
                            üìã R√©sum√© D√©taill√©
                        </button>
                        <button class="tab" onclick="switchTab('points')">
                            üéØ Points Cl√©s
                        </button>
                        <button class="tab" onclick="switchTab('transcript')">
                            üìù Transcription
                        </button>
                    </div>

                    <!-- TAB CONTENT -->
                    <div class="tab-content">
                        <!-- QUICK SUMMARY -->
                        <div id="quickTab" class="tab-panel active">
                            <div class="summary-card">
                                <div class="summary-header">
                                    <h3>‚ö° R√©sum√© en 30 secondes</h3>
                                    <div class="summary-stats">
                                        <span class="stat">
                                            <span class="stat-value" id="summaryWords">-</span>
                                            <span class="stat-label">mots</span>
                                        </span>
                                        <span class="stat">
                                            <span class="stat-value" id="readingTime">-</span>
                                            <span class="stat-label">min de lecture</span>
                                        </span>
                                    </div>
                                </div>
                                <div id="quickSummary" class="summary-content">
                                    <!-- Contenu g√©n√©r√© dynamiquement -->
                                </div>
                            </div>
                        </div>

                        <!-- DETAILED SUMMARY -->
                        <div id="detailedTab" class="tab-panel">
                            <div class="summary-card">
                                <div class="summary-header">
                                    <h3>üìã Analyse Compl√®te</h3>
                                </div>
                                <div id="detailedSummary" class="summary-content">
                                    <!-- Contenu g√©n√©r√© dynamiquement -->
                                </div>
                            </div>
                        </div>

                        <!-- KEY POINTS -->
                        <div id="pointsTab" class="tab-panel">
                            <div class="summary-card">
                                <div class="summary-header">
                                    <h3>üéØ Points Essentiels</h3>
                                </div>
                                <div id="keyPoints" class="points-list">
                                    <!-- Contenu g√©n√©r√© dynamiquement -->
                                </div>
                            </div>
                        </div>

                        <!-- TRANSCRIPT -->
                        <div id="transcriptTab" class="tab-panel">
                            <div class="summary-card">
                                <div class="summary-header">
                                    <h3>üìù Transcription Compl√®te</h3>
                                    <button class="btn-toggle" onclick="toggleTranscript()">
                                        üîΩ Afficher la transcription compl√®te
                                    </button>
                                </div>
                                <div class="transcript-content" style="display: none;">
                                    <div id="fullTranscript" class="transcript-text">
                                        <!-- Contenu g√©n√©r√© dynamiquement -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ACTIONS -->
                    <div class="results-actions">
                        <button onclick="copyToClipboard()" class="btn btn-primary">
                            üìã Copier le r√©sum√©
                        </button>
                        <button onclick="shareResults()" class="btn btn-secondary">
                            üì§ Partager
                        </button>
                        <button onclick="downloadResults()" class="btn btn-outline">
                            üíæ T√©l√©charger
                        </button>
                        <button onclick="newAnalysis()" class="btn btn-ghost">
                            üÜï Nouvelle analyse
                        </button>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <p class="footer-text">
                    üöÄ Propuls√© par l'IA | 
                    <span class="footer-version">v2.0</span> |
                    <a href="javascript:testDiagnostic()" class="footer-link">üîß Test</a>
                </p>
                <div class="footer-stats">
                    <span id="totalAnalyzed">0</span> vid√©os analys√©es
                </div>
            </div>
        </div>
    </footer>

    <!-- TOAST NOTIFICATIONS -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- HELP MODAL -->
    <div id="helpModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="modal-close" onclick="closeHelp()">&times;</span>
            <h2>‚ùì Aide - YouTube Summarizer</h2>
            <div class="help-content">
                <h3>üéØ Comment utiliser l'outil :</h3>
                <ol>
                    <li>Copiez l'URL d'une vid√©o YouTube</li>
                    <li>Collez-la dans le champ ci-dessus</li>
                    <li>Cliquez sur "Analyser la vid√©o"</li>
                    <li>Patientez pendant l'analyse</li>
                    <li>Consultez votre r√©sum√© intelligent !</li>
                </ol>
                
                <h3>‚ö†Ô∏è Formats support√©s :</h3>
                <ul>
                    <li>https://www.youtube.com/watch?v=...</li>
                    <li>https://youtu.be/...</li>
                    <li>https://www.youtube.com/embed/...</li>
                </ul>
                
                <h3>üîß Probl√®me technique ?</h3>
                <p>Ouvrez la console (F12) et tapez <code>testDiagnostic()</code></p>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="script.js"></script>
    
    <!-- FUNCTIONS UTILITAIRES -->
    <script>
        // Fonctions utilitaires pour l'interface
        function setExampleUrl(url) {
            const input = document.getElementById('youtubeUrl');
            if (input) {
                input.value = url;
                input.focus();
                showNotification('üìù URL exemple ajout√©e !', 'success');
            }
        }

        function switchTab(tabName) {
            // D√©sactiver tous les onglets
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(panel => panel.classList.remove('active'));
            
            // Activer l'onglet s√©lectionn√©
            event.target.classList.add('active');
            document.getElementById(tabName + 'Tab').classList.add('active');
        }

        function shareResults() {
            if (navigator.share) {
                navigator.share({
                    title: 'R√©sum√© YouTube Summarizer',
                    text: 'D√©couvrez ce r√©sum√© de vid√©o YouTube !',
                    url: window.location.href
                });
            } else {
                copyToClipboard();
                showNotification('üìã R√©sum√© copi√© ! Vous pouvez le partager', 'success');
            }
        }

        function downloadResults() {
            const summary = document.querySelector('.tab-panel.active .summary-content');
            if (summary) {
                const content = summary.innerText;
                const blob = new Blob([content], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = 'youtube-summary.txt';
                a.click();
                
                URL.revokeObjectURL(url);
                showNotification('üíæ R√©sum√© t√©l√©charg√© !', 'success');
            }
        }

        function showHelp() {
            document.getElementById('helpModal').style.display = 'block';
        }

        function closeHelp() {
            document.getElementById('helpModal').style.display = 'none';
        }

        // Fermer modal avec Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeHelp();
            }
        });
    </script>
</body>
</html>
